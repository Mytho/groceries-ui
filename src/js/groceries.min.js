!function(){"use strict";function e(e){e.when("/login",{controller:"LoginController",controllerAs:"vm",templateUrl:"templates/login.html"}).when("/logout",{controller:"LogoutController",controllerAs:"vm",templateUrl:"templates/logout.html"}).when("/list",{controller:"ListController",controllerAs:"vm",templateUrl:"templates/list.html"}).when("/menu",{controller:"MenuController",controllerAs:"vm",templateUrl:"templates/menu.html"}).when("/new",{controller:"NewController",controllerAs:"vm",templateUrl:"templates/new.html"}).otherwise({redirectTo:"/login"})}angular.module("groceries",["ngRoute","ngTouch","groceries.config"]).config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e){function t(t,n,o){e(function(){n[0].focus()},0)}return{link:t,restrict:"A"}}angular.module("groceries").directive("autoFocus",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,n){function o(o,r,i){function c(e){return m?void(p=t(a,f)):s(0)}function u(e){return e.x-h.x<0?s(0):r.find(".swipe-inner").offset().left>r.find(".swipe-inner").outerWidth()*d?(m=!0,s(r.find(".swipe-inner").outerWidth())):void s(e.x-h.x,!0)}function l(e){e.stopPropagation(),t.cancel(p),s(0)}function s(e,t){return t?r.find(".swipe-inner").css("left",e):void r.find(".swipe-inner").animate({left:e},200)}function a(){function e(){o.items.splice(o.items.indexOf(o.item),1),r.remove()}function t(){s(0)}return n.remove(o.item).then(e)["catch"](t)}function g(e){m=!1,h=e}var d,f,m,h,p;d=.65,f=1500,o.undo=l,e.bind(r.find(".swipe-inner"),{start:g,move:u,end:c})}return{link:{post:o},scope:{item:"=swipeDeleteItem",items:"=swipeDeleteItems"},template:'<div class="swipe-outer"><div class="swipe-inner" ng-transclude></div><div class="swipe-undo" ng-click="undo($event)"><i class="fa fa-trash"></i><span class="name">{{item.name}}</span><span class="label">UNDO</span></div></div>',transclude:!0,replace:!0,restrict:"A"}}angular.module("groceries").directive("swipeDelete",e),e.$inject=["$swipe","$timeout","groceriesService"]}(),function(){"use strict";function e(e,t,n,o,r){function i(e){function n(e){return e.data}return t({method:"POST",url:r.backend+"/item",headers:{"X-Auth-Token":o.get("token","")},data:{name:e}}).then(n)["catch"](c)}function c(t){return 403==t.status?(e.path("/logout"),n.reject("Forbidden")):void 0}function u(e,n){function o(e){return e.data.token}return t({method:"POST",url:r.backend+"/login",data:{username:e,password:n}}).then(o)}function l(){function e(e){return e.data.items}return t({method:"GET",url:r.backend+"/item",headers:{"X-Auth-Token":o.get("token","")}}).then(e)["catch"](c)}function s(e){function n(e){return"ok"===e.data.status}return t({method:"DELETE",url:r.backend+"/item/"+e.id,headers:{"X-Auth-Token":o.get("token","")}}).then(n)["catch"](c)}function a(){function e(e){return e.data.suggestions}return t({method:"GET",url:r.backend+"/suggest",headers:{"X-Auth-Token":o.get("token","")}}).then(e)["catch"](c)}function g(e){function n(e){return e.data}return t({method:"PUT",url:r.backend+"/item/"+e.id,headers:{"X-Auth-Token":o.get("token","")}}).then(n)["catch"](c)}return{add:i,login:u,items:l,remove:s,toggle:g,suggestions:a}}angular.module("groceries").service("groceriesService",e),e.$inject=["$location","$http","$q","localStorageService","CONFIG"]}(),function(){"use strict";function e(e){function t(t,n){return e.localStorage[t]||n}function n(t,n){e.localStorage[t]=n}function o(t){delete e.localStorage[t]}return{get:t,set:n,remove:o}}angular.module("groceries").service("localStorageService",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){function t(){function t(e){o.loading=!1,o.items=e}return e.items().then(t)}function n(t){function n(e){var n=o.items.indexOf(t);-1!==n&&(o.items[n]=e)}return e.toggle(t).then(n)}var o=this;o.toggle=n,o.loading=!0,o.items=[],t()}angular.module("groceries").controller("ListController",e),e.$inject=["groceriesService"]}(),function(){"use strict";function e(e,t,n){function o(){n.get("token")&&i()}function r(){function e(e){n.set("token",e),i()}return t.login(c.username,c.password).then(e)}function i(){e.path("/list")}var c=this;c.login=r,c.password="",c.username="",o()}angular.module("groceries").controller("LoginController",e),e.$inject=["$location","groceriesService","localStorageService"]}(),function(){"use strict";function e(e,t){function n(){t.remove("token"),e.path("/login")}n()}angular.module("groceries").controller("LogoutController",e),e.$inject=["$location","localStorageService"]}(),function(){"use strict";function e(e){function t(){e.path("/logout")}var n=this;n.logout=t}angular.module("groceries").controller("MenuController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e,t){function n(){function e(e){r.loading=!1,r.suggestions=e}return t.suggestions().then(e)}function o(n){function o(){e.path("/list")}t.add(n||r.input).then(o)}var r=this;r.add=o,r.input="",r.loading=!0,r.suggestions=[],n()}angular.module("groceries").controller("NewController",e),e.$inject=["$location","groceriesService"]}();