/*! Copyright (c) 2015  */
!function(){"use strict";function a(a){a.when("/login",{controller:"LoginController",controllerAs:"vm",templateUrl:"templates/login.html"}).when("/logout",{controller:"LogoutController",controllerAs:"vm",templateUrl:"templates/logout.html"}).when("/list",{controller:"ListController",controllerAs:"vm",templateUrl:"templates/list.html"}).when("/menu",{controller:"MenuController",controllerAs:"vm",templateUrl:"templates/menu.html"}).when("/new",{controller:"NewController",controllerAs:"vm",templateUrl:"templates/new.html"}).otherwise({redirectTo:"/login"})}angular.module("groceries",["ngRoute","groceries.config"]).config(a),a.$inject=["$routeProvider"]}(),function(){"use strict";angular.module("groceries.config",[]).constant("CONFIG",{backend:"http://zengerink.com:8002"})}(),function(){"use strict";function a(a,b,c,d,e){function f(a){function c(a){return a.data}return b({method:"POST",url:e.backend+"/item",headers:{"X-Auth-Token":d.get("token","")},data:{name:a}}).then(c)["catch"](g)}function g(b){return 403==b.status?(a.path("/logout"),c.reject("Forbidden")):void 0}function h(a,c){function d(a){return a.data.token}return b({method:"POST",url:e.backend+"/login",data:{username:a,password:c}}).then(d)}function i(){function a(a){return a.data.items}return b({method:"GET",url:e.backend+"/item",headers:{"X-Auth-Token":d.get("token","")}}).then(a)["catch"](g)}function j(){function a(a){return a.data.suggestions}return b({method:"GET",url:e.backend+"/suggest",headers:{"X-Auth-Token":d.get("token","")}}).then(a)["catch"](g)}function k(a){function c(a){return a.data}return b({method:"PUT",url:e.backend+"/item/"+a.id,headers:{"X-Auth-Token":d.get("token","")}}).then(c)["catch"](g)}return{add:f,login:h,items:i,toggle:k,suggestions:j}}angular.module("groceries").service("groceriesService",a),a.$inject=["$location","$http","$q","localStorageService","CONFIG"]}(),function(){"use strict";function a(a){function b(b,c){return a.localStorage[b]||c}function c(b,c){a.localStorage[b]=c}function d(b){delete a.localStorage[b]}return{get:b,set:c,remove:d}}angular.module("groceries").service("localStorageService",a),a.$inject=["$window"]}(),function(){"use strict";function a(a){function b(){function b(a){d.items=a}return a.items().then(b)}function c(b){function c(a){var c=d.items.indexOf(b);-1!==c&&(d.items[c]=a)}return a.toggle(b).then(c)}var d=this;d.toggle=c,d.items=[],b()}angular.module("groceries").controller("ListController",a),a.$inject=["groceriesService"]}(),function(){"use strict";function a(a,b,c){function d(){c.get("token")&&f()}function e(){function a(a){c.set("token",a),f()}return b.login(g.username,g.password).then(a)}function f(){a.path("/list")}var g=this;g.login=e,g.password="",g.username="",d()}angular.module("groceries").controller("LoginController",a),a.$inject=["$location","groceriesService","localStorageService"]}(),function(){"use strict";function a(a,b){function c(){b.remove("token"),a.path("/login")}c()}angular.module("groceries").controller("LogoutController",a),a.$inject=["$location","localStorageService"]}(),function(){"use strict";function a(a){function b(){a.path("/logout")}var c=this;c.logout=b}angular.module("groceries").controller("MenuController",a),a.$inject=["$location"]}(),function(){"use strict";function a(a,b){function c(){function c(){a.path("/list")}b.add(d.name).then(c)}var d=this;d.add=c,d.name=""}angular.module("groceries").controller("NewController",a),a.$inject=["$location","groceriesService"]}();