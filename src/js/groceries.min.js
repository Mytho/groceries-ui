/*! Copyright (c) 2015  */
!function(){"use strict";function a(a){a.when("/login",{controller:"LoginController",controllerAs:"vm",templateUrl:"templates/login.html"}).when("/logout",{controller:"LogoutController",controllerAs:"vm",templateUrl:"templates/logout.html"}).when("/list",{controller:"ListController",controllerAs:"vm",templateUrl:"templates/list.html"}).when("/menu",{controller:"MenuController",controllerAs:"vm",templateUrl:"templates/menu.html"}).when("/new",{controller:"NewController",controllerAs:"vm",templateUrl:"templates/new.html"}).otherwise({redirectTo:"/login"})}angular.module("groceries",["ngRoute","ngTouch","groceries.config"]).config(a),a.$inject=["$routeProvider"]}(),function(){"use strict";angular.module("groceries.config",[]).constant("CONFIG",{backend:"http://zengerink.com:8002"})}(),function(){"use strict";function a(a){function b(b,c,d){a(function(){c[0].focus()},0)}return{link:b,restrict:"A"}}angular.module("groceries").directive("autoFocus",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a,b){function c(a,b,c){b.data("origHeight",b.outerHeight()),b.data("origPaddingTop",b.css("padding-top"))}function d(c,d,e){function f(a){return c.isFinished?void(c.t=b(i,1500)):j(0)}function g(a){return a.x-c.startCoords.x<0?j(0):d.find(".swipe-inner").offset().left>d.find(".swipe-inner").outerWidth()/2?(c.isFinished=!0,j(d.find(".swipe-inner").outerWidth())):void j(a.x-c.startCoords.x,!0)}function h(){window.console.log("Canceled!"),b.cancel(c.t),j(0)}function i(){window.console.log("Removing "+c.item.name),d.remove()}function j(a,b){return b?d.find(".swipe-inner").css("left",a):void d.find(".swipe-inner").animate({left:a},200)}function k(a){c.isFinished=!1,c.startCoords=a}c.styles={outer:{padding:0,height:d.data("origHeight")},inner:{"padding-top":d.data("origPaddingTop"),height:d.data("origHeight")},undo:{position:"absolute","padding-top":d.data("origPaddingTop"),height:d.data("origHeight")}},c.undo=h,a.bind(d,{start:k,move:g,end:f})}return{link:{pre:c,post:d},scope:{item:"=swipeDelete"},template:'<div class="swipe-outer" ng-style="styles.outer"><div class="swipe-inner" ng-style="styles.inner" ng-transclude></div><div class="swipe-undo" ng-style="styles.undo"><i class="fa fa-trash"></i><a ng-click="undo()">UNDO</a></div></div>',transclude:!0,replace:!0,restrict:"A"}}angular.module("groceries").directive("swipeDelete",a),a.$inject=["$swipe","$timeout"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a){function c(a){return a.data}return b({method:"POST",url:e.backend+"/item",headers:{"X-Auth-Token":d.get("token","")},data:{name:a}}).then(c)["catch"](g)}function g(b){return 403==b.status?(a.path("/logout"),c.reject("Forbidden")):void 0}function h(a,c){function d(a){return a.data.token}return b({method:"POST",url:e.backend+"/login",data:{username:a,password:c}}).then(d)}function i(){function a(a){return a.data.items}return b({method:"GET",url:e.backend+"/item",headers:{"X-Auth-Token":d.get("token","")}}).then(a)["catch"](g)}function j(a){function c(a){return"ok"===a.data.status}return b({method:"DELETE",url:e.backend+"/item/"+a.id,headers:{"X-Auth-Token":d.get("token","")}}).then(c)["catch"](g)}function k(){function a(a){return a.data.suggestions}return b({method:"GET",url:e.backend+"/suggest",headers:{"X-Auth-Token":d.get("token","")}}).then(a)["catch"](g)}function l(a){function c(a){return a.data}return b({method:"PUT",url:e.backend+"/item/"+a.id,headers:{"X-Auth-Token":d.get("token","")}}).then(c)["catch"](g)}return{add:f,login:h,items:i,remove:j,toggle:l,suggestions:k}}angular.module("groceries").service("groceriesService",a),a.$inject=["$location","$http","$q","localStorageService","CONFIG"]}(),function(){"use strict";function a(a){function b(b,c){return a.localStorage[b]||c}function c(b,c){a.localStorage[b]=c}function d(b){delete a.localStorage[b]}return{get:b,set:c,remove:d}}angular.module("groceries").service("localStorageService",a),a.$inject=["$window"]}(),function(){"use strict";function a(a){function b(){function b(a){d.items=a}return a.items().then(b)}function c(b){function c(a){var c=d.items.indexOf(b);-1!==c&&(d.items[c]=a)}return a.toggle(b).then(c)}var d=this;d.toggle=c,d.items=[],b()}angular.module("groceries").controller("ListController",a),a.$inject=["groceriesService"]}(),function(){"use strict";function a(a,b,c){function d(){c.get("token")&&f()}function e(){function a(a){c.set("token",a),f()}return b.login(g.username,g.password).then(a)}function f(){a.path("/list")}var g=this;g.login=e,g.password="",g.username="",d()}angular.module("groceries").controller("LoginController",a),a.$inject=["$location","groceriesService","localStorageService"]}(),function(){"use strict";function a(a,b){function c(){b.remove("token"),a.path("/login")}c()}angular.module("groceries").controller("LogoutController",a),a.$inject=["$location","localStorageService"]}(),function(){"use strict";function a(a){function b(){a.path("/logout")}var c=this;c.logout=b}angular.module("groceries").controller("MenuController",a),a.$inject=["$location"]}(),function(){"use strict";function a(a,b){function c(){function a(a){e.suggestions=a}return b.suggestions().then(a)}function d(c){function d(){a.path("/list")}b.add(c||e.input).then(d)}var e=this;e.add=d,e.input="",e.suggestions=[],c()}angular.module("groceries").controller("NewController",a),a.$inject=["$location","groceriesService"]}();