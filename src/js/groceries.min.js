/*! Copyright (c) 2015  */
!function(){"use strict";function a(a){a.when("/login",{controller:"LoginController",controllerAs:"vm",templateUrl:"templates/login.html"}).when("/logout",{controller:"LogoutController",controllerAs:"vm",templateUrl:"templates/logout.html"}).when("/list",{controller:"ListController",controllerAs:"vm",templateUrl:"templates/list.html"}).when("/menu",{controller:"MenuController",controllerAs:"vm",templateUrl:"templates/menu.html"}).when("/new",{controller:"NewController",controllerAs:"vm",templateUrl:"templates/new.html"}).otherwise({redirectTo:"/login"})}angular.module("groceries",["ngRoute","ngTouch","groceries.config"]).config(a),a.$inject=["$routeProvider"]}(),function(){"use strict";angular.module("groceries.config",[]).constant("CONFIG",{backend:"http://zengerink.com:8002"})}(),function(){"use strict";function a(a){function b(b,c,d){a(function(){c[0].focus()},0)}return{link:b,restrict:"A"}}angular.module("groceries").directive("autoFocus",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a){function b(a,b,c){b.data("origHeight",b.outerHeight()),b.data("origPaddingTop",b.css("padding-top"))}function c(b,c,d){function e(a){}function f(a){j||h(0)}function g(a){return a.x-k.x<0?h(0):c.find(".swipe-inner").offset().left>c.find(".swipe-inner").outerWidth()/2?(j=!0,h(c.find(".swipe-inner").outerWidth())):void h(a.x-k.x,!0)}function h(a,b){return b?c.find(".swipe-inner").css("left",a):void c.find(".swipe-inner").animate({left:a},200)}function i(a){j=!1,k=a}var j,k;b.styles={outer:{padding:0,height:c.data("origHeight")},inner:{"padding-top":c.data("origPaddingTop"),height:c.data("origHeight")},cancel:{position:"absolute","padding-top":c.data("origPaddingTop"),height:c.data("origHeight")}},a.bind(c,{start:i,move:g,end:f,cancel:e})}return{link:{pre:b,post:c},scope:{item:"=swipeDelete"},template:'<div class="swipe-outer" ng-style="styles.outer"><div class="swipe-inner" ng-style="styles.inner" ng-transclude></div><div class="swipe-cancel" ng-style="styles.cancel"><i class="fa fa-trash"></i></div></div>',transclude:!0,replace:!0,restrict:"A"}}angular.module("groceries").directive("swipeDelete",a),a.$inject=["$swipe"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a){function c(a){return a.data}return b({method:"POST",url:e.backend+"/item",headers:{"X-Auth-Token":d.get("token","")},data:{name:a}}).then(c)["catch"](g)}function g(b){return 403==b.status?(a.path("/logout"),c.reject("Forbidden")):void 0}function h(a,c){function d(a){return a.data.token}return b({method:"POST",url:e.backend+"/login",data:{username:a,password:c}}).then(d)}function i(){function a(a){return a.data.items}return b({method:"GET",url:e.backend+"/item",headers:{"X-Auth-Token":d.get("token","")}}).then(a)["catch"](g)}function j(a){function c(a){return"ok"===a.data.status}return b({method:"DELETE",url:e.backend+"/item/"+a.id,headers:{"X-Auth-Token":d.get("token","")}}).then(c)["catch"](g)}function k(){function a(a){return a.data.suggestions}return b({method:"GET",url:e.backend+"/suggest",headers:{"X-Auth-Token":d.get("token","")}}).then(a)["catch"](g)}function l(a){function c(a){return a.data}return b({method:"PUT",url:e.backend+"/item/"+a.id,headers:{"X-Auth-Token":d.get("token","")}}).then(c)["catch"](g)}return{add:f,login:h,items:i,remove:j,toggle:l,suggestions:k}}angular.module("groceries").service("groceriesService",a),a.$inject=["$location","$http","$q","localStorageService","CONFIG"]}(),function(){"use strict";function a(a){function b(b,c){return a.localStorage[b]||c}function c(b,c){a.localStorage[b]=c}function d(b){delete a.localStorage[b]}return{get:b,set:c,remove:d}}angular.module("groceries").service("localStorageService",a),a.$inject=["$window"]}(),function(){"use strict";function a(a){function b(){function b(a){d.items=a}return a.items().then(b)}function c(b){function c(a){var c=d.items.indexOf(b);-1!==c&&(d.items[c]=a)}return a.toggle(b).then(c)}var d=this;d.toggle=c,d.items=[],b()}angular.module("groceries").controller("ListController",a),a.$inject=["groceriesService"]}(),function(){"use strict";function a(a,b,c){function d(){c.get("token")&&f()}function e(){function a(a){c.set("token",a),f()}return b.login(g.username,g.password).then(a)}function f(){a.path("/list")}var g=this;g.login=e,g.password="",g.username="",d()}angular.module("groceries").controller("LoginController",a),a.$inject=["$location","groceriesService","localStorageService"]}(),function(){"use strict";function a(a,b){function c(){b.remove("token"),a.path("/login")}c()}angular.module("groceries").controller("LogoutController",a),a.$inject=["$location","localStorageService"]}(),function(){"use strict";function a(a){function b(){a.path("/logout")}var c=this;c.logout=b}angular.module("groceries").controller("MenuController",a),a.$inject=["$location"]}(),function(){"use strict";function a(a,b){function c(){function a(a){e.suggestions=a}return b.suggestions().then(a)}function d(c){function d(){a.path("/list")}b.add(c||e.input).then(d)}var e=this;e.add=d,e.input="",e.suggestions=[],c()}angular.module("groceries").controller("NewController",a),a.$inject=["$location","groceriesService"]}();